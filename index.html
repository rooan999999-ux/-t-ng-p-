<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>CLB Tin Há»c Viá»‡t Nam</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;font-family:Arial;
  background:linear-gradient(135deg,#020024,#090979,#00d4ff);
  color:#fff;
}
header{text-align:center;padding:25px}
nav button{
  margin:5px;padding:10px 15px;
  border:none;border-radius:20px;
  background:#00d4ff;font-weight:bold;
}
section{
  margin:20px;padding:20px;
  background:rgba(0,0,0,.55);
  border-radius:20px;
}
input,textarea,button{
  width:100%;padding:10px;
  margin:5px 0;border:none;
  border-radius:10px;
}
.post,.comment{
  background:#111;padding:15px;
  border-radius:15px;margin:10px 0;
}
.admin{color:#ffcc00;font-weight:bold}
img{max-width:100%;border-radius:15px}
</style>
</head>

<body>

<header>
  <h1>ğŸ’» CÃ‚U Láº C Bá»˜ TIN Há»ŒC VIá»†T NAM</h1>
  <p>THPT Phan Chu Trinh â€¢ CÃ´ng nghá»‡ â€¢ SÃ¡ng táº¡o</p>
  <nav>
    <button onclick="show('home')">ğŸ  Trang chá»§</button>
    <button onclick="show('auth')">ğŸ” ÄÄƒng nháº­p</button>
    <button onclick="show('posts')">ğŸš€ Hoáº¡t Ä‘á»™ng</button>
    <button onclick="show('admin')">ğŸ‘‘ Admin</button>
  </nav>
</header>

<section id="home">
  <h2>ğŸ‡»ğŸ‡³ Giá»›i thiá»‡u</h2>
  <p>
    CLB Tin há»c THPT Phan Chu Trinh lÃ  nÆ¡i há»c sinh yÃªu cÃ´ng nghá»‡,
    láº­p trÃ¬nh vÃ  sÃ¡ng táº¡o cÃ¹ng há»c táº­p â€“ chia sáº» â€“ phÃ¡t triá»ƒn.
  </p>
</section>

<section id="auth" style="display:none">
  <h2>ğŸ” ÄÄƒng nháº­p / ÄÄƒng kÃ½</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Máº­t kháº©u">
  <button onclick="register()">ÄÄƒng kÃ½</button>
  <button onclick="login()">ÄÄƒng nháº­p</button>
  <p id="msg"></p>
</section>

<section id="posts" style="display:none">
  <h2>ğŸš€ Hoáº¡t Ä‘á»™ng CLB</h2>

  <textarea id="postText" placeholder="Ná»™i dung hoáº¡t Ä‘á»™ng (admin)"></textarea>
  <input id="postImg" placeholder="Link áº£nh (admin)">
  <button onclick="addPost()">ÄÄƒng bÃ i</button>

  <div id="postList"></div>
</section>

<section id="admin" style="display:none">
  <h2>ğŸ‘‘ Trang quáº£n trá»‹</h2>
  <p>Chá»‰ ADMIN má»›i tháº¥y</p>
  <div id="adminComments"></div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, push, onChildAdded, remove } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

/* ğŸ”¥ DÃN FIREBASE CONFIG Cá»¦A Báº N á» ÄÃ‚Y */
const firebaseConfig = {
  apiKey: "API_KEY_Cá»¦A_Báº N",
  authDomain: "PROJECT.firebaseapp.com",
  databaseURL: "https://PROJECT-default-rtdb.firebaseio.com",
  projectId: "PROJECT_ID"
};

/* ğŸ‘‘ EMAIL ADMIN (EMAIL Cá»¦A Báº N) */
const ADMIN_EMAIL = "admin@gmail.com";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

window.show = id=>{
  document.querySelectorAll("section")
    .forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
}

window.register = ()=>{
  createUserWithEmailAndPassword(auth,email.value,password.value)
    .then(()=>msg.innerText="ÄÄƒng kÃ½ thÃ nh cÃ´ng ğŸ‰")
    .catch(e=>msg.innerText=e.message);
}

window.login = ()=>{
  signInWithEmailAndPassword(auth,email.value,password.value)
    .then(u=>{
      msg.innerText="ÄÄƒng nháº­p thÃ nh cÃ´ng âœ…";
      if(u.user.email===ADMIN_EMAIL){
        alert("ğŸ‘‘ Báº¡n lÃ  ADMIN");
        show("admin");
      }
    })
    .catch(e=>msg.innerText=e.message);
}

window.addPost = ()=>{
  if(auth.currentUser?.email!==ADMIN_EMAIL)
    return alert("Chá»‰ ADMIN má»›i Ä‘Äƒng bÃ i!");
  push(ref(db,"posts"),{
    text:postText.value,
    img:postImg.value
  });
  postText.value="";
  postImg.value="";
}

onChildAdded(ref(db,"posts"),snap=>{
  const p=snap.val();
  postList.innerHTML+=`
    <div class="post">
      <img src="${p.img}">
      <p>${p.text}</p>
      <textarea placeholder="BÃ¬nh luáº­n..."
        onkeydown="if(event.key==='Enter'){
          push(ref(db,'comments'),{
            text:this.value,
            email:auth.currentUser?.email||'KhÃ¡ch'
          });
          this.value='';
        }"></textarea>
    </div>`;
});

onChildAdded(ref(db,"comments"),snap=>{
  const c=snap.val();
  adminComments.innerHTML+=`
    <div class="comment">
      <b class="${c.email===ADMIN_EMAIL?'admin':''}">
        ${c.email}
      </b>: ${c.text}
      <button onclick="remove(ref(db,'comments/${snap.key}'))">
        âŒ
      </button>
    </div>`;
});
</script>

</body>
  </html>
