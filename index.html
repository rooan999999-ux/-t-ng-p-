<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>CLB Tin há»c Phan Chu Trinh</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#0f172a;color:#e5e7eb}
header{background:#020617;padding:20px;text-align:center}
section{background:#020617;margin:15px;padding:15px;border-radius:12px}
h1,h2{color:#38bdf8}
input,textarea,button{
  width:100%;padding:10px;margin:6px 0;
  border-radius:8px;border:none
}
button{background:#38bdf8;color:#020617;font-weight:bold}
.post{background:#0f172a;padding:10px;border-radius:8px;margin:8px 0}
.admin{color:#facc15;font-weight:bold}
</style>
</head>

<body>

<header>
  <h1>ğŸ’» CLB Tin há»c Phan Chu Trinh</h1>
  <p>NÆ¡i há»c táº­p â€“ sÃ¡ng táº¡o â€“ láº­p trÃ¬nh</p>
  <button onclick="login()">ÄÄƒng nháº­p Google</button>
  <p id="userInfo"></p>
</header>

<section>
<h2>ğŸ« Giá»›i thiá»‡u CLB</h2>
<p>CLB Tin há»c Phan Chu Trinh lÃ  nÆ¡i dÃ nh cho há»c sinh yÃªu thÃ­ch cÃ´ng nghá»‡,
láº­p trÃ¬nh web vÃ  sÃ¡ng táº¡o sá»‘.</p>
</section>

<section>
<h2>ğŸ“š Ná»™i dung há»c</h2>
<ul>
<li>HTML â€“ CSS â€“ JavaScript</li>
<li>Láº­p trÃ¬nh web</li>
<li>Firebase â€“ realtime</li>
<li>Dá»± Ã¡n thá»±c táº¿</li>
</ul>
</section>

<section id="adminBox" style="display:none">
<h2>ğŸ‘‘ ÄÄƒng bÃ i (ADMIN)</h2>
<textarea id="baiviet" placeholder="Nháº­p ná»™i dung bÃ i viáº¿t..."></textarea>
<button onclick="dangBai()">ÄÄƒng bÃ i</button>
</section>

<section>
<h2>ğŸ“ BÃ i viáº¿t CLB</h2>
<div id="dsBaiViet"></div>
</section>

<section>
<h2>ğŸ’¬ BÃ¬nh luáº­n</h2>
<input id="binhluan" placeholder="Nháº­p bÃ¬nh luáº­n..." />
<button onclick="guiBinhLuan()">Gá»­i</button>
<div id="dsBinhLuan"></div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import {
  getFirestore, collection, addDoc, onSnapshot
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";
import {
  getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyALm-U_oy7AasGW1qwE_k9VmueYuynF1aw",
  authDomain: "clb-tin-hoc-phan-chu-trinh.firebaseapp.com",
  projectId: "clb-tin-hoc-phan-chu-trinh",
  storageBucket: "clb-tin-hoc-phan-chu-trinh.firebasestorage.app",
  messagingSenderId: "899102803485",
  appId: "1:899102803485:web:3b0c0ed8efc144d888e8f4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// ğŸ‘‘ EMAIL ADMIN (Äá»”I THÃ€NH EMAIL Cá»¦A Báº N)
const ADMIN_EMAIL = "your-email@gmail.com";

window.login = () => signInWithPopup(auth, provider);

onAuthStateChanged(auth, user => {
  if(user){
    userInfo.innerHTML = `ğŸ‘¤ ${user.displayName}`;
    if(user.email === ADMIN_EMAIL){
      adminBox.style.display = "block";
      userInfo.innerHTML += " <span class='admin'>(ADMIN)</span>";
    }
  }
});

// ÄÄ‚NG BÃ€I
window.dangBai = async () => {
  const text = baiviet.value;
  if(text.trim()=="") return;
  await addDoc(collection(db,"baiviet"),{
    noiDung:text,time:Date.now()
  });
  baiviet.value="";
};

// HIá»†N BÃ€I VIáº¾T
onSnapshot(collection(db,"baiviet"),snap=>{
  dsBaiViet.innerHTML="";
  snap.forEach(doc=>{
    dsBaiViet.innerHTML+=`<div class="post">ğŸ“ ${doc.data().noiDung}</div>`;
  });
});

// BÃŒNH LUáº¬N
window.guiBinhLuan = async () => {
  const text = binhluan.value;
  if(text.trim()=="") return;
  await addDoc(collection(db,"binhluan"),{
    noiDung:text,time:Date.now()
  });
  binhluan.value="";
};

onSnapshot(collection(db,"binhluan"),snap=>{
  dsBinhLuan.innerHTML="";
  snap.forEach(doc=>{
    dsBinhLuan.innerHTML+=`<div class="post">ğŸ’¬ ${doc.data().noiDung}</div>`;
  });
});
</script>

</body>
  </html>
